<html>
<head>
    <meta charset="UTF-8">
    <title>edoC roF</title>
<style type="text/css">
    textarea{
        width:100%;
    }

    /* 表示領域全体 */
    div.tabbox {
        margin: 0px; padding: 0px;
    }

    /* タブ部分 */
    p.tabs { margin: 0px; padding: 0px; }
    p.tabs a {
        display: block; width: 5em; float: left;
        margin: 0px 1px 0px 0px; padding: 3px;
        text-align: center;
        border-radius: 12px 12px 0px 0px; /* 角を丸くする */
    }
    p.tabs a.tab1 { background-color: blue; color: white; }
    p.tabs a.tab2 { background-color: #aaaa00; color:white;}
    p.tabs a.tab3 { background-color: red; color: white; }
    p.tabs a:hover { color: yellow; }

    /* タブ中身のボックス */
    div.tab {  overflow: auto; clear: left; }
    div#tab1 {
        border: 2px solid blue; background-color: #ccffff;
    }
    div#tab2 {
        border: 2px solid #aaaa00; background-color: #ffffcc;
    }
    div#tab3 {
        border: 2px solid red; background-color: #ffcccc;
    }
    div.tab p { margin: 0.5em; }
</style>
<script type="text/javascript">
    function ChangeTab(tabname) {
        // 全部消す
        document.getElementById('tab1').style.display = 'none';
        document.getElementById('tab2').style.display = 'none';
        document.getElementById('tab3').style.display = 'none';
        // 指定箇所のみ表示
        document.getElementById(tabname).style.display = 'block';
    }

    function Cae(){
        var input=document.getElementById("caein").value;
        var output=new String();
        if(document.getElementById("caee").checked){
            input=input.toUpperCase();
            for(var i=0; i<input.length; i++){
                var test=input.charCodeAt(i);
                if(test>0x0040 && test<0x005B){
                    test-=65;
                    test+=document.getElementById("zure").value*1;
                    test=test%26;
                    test+=65;
                    output+=String.fromCharCode(test);
                }
                else output+=String.fromCharCode(test);
            }
            document.getElementById("caeout").value=output;
        }
        else{
            input=input.toLowerCase();
            for(var i=0; i<input.length; i++){
                var test=input.charCodeAt(i);
                if(test>0x0060 && test<0x007B){
                    test-=97;
                    test+=26;
                    test-=document.getElementById("zure").value*1;
                    test=test%26;
                    test+=97;
                    output+=String.fromCharCode(test);
                }
                else output+=String.fromCharCode(test);
            }
            document.getElementById("caeout").value=output;
        }
    }

    function shuffle(array) {
        var n = array.length, t, i;

        while (n) {
            i = Math.floor(Math.random() * n--);
            t = array[n];
            array[n] = array[i];
            array[i] = t;
        }

        return array;
    }

    function Sin(){
        var input=document.getElementById("sinin").value;
        var output=new String();
        if(document.getElementById("sine").checked){
            var key=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26];
            key=shuffle(key);
            var keyword=new String();
            for(var i=0; i<26; i++){
                keyword+=String.fromCharCode(key[i]+64);
            }
            document.getElementById("sinkey").value=keyword;
            input=input.toUpperCase();
            for(var i=0; i<input.length; i++){
                var test=input.charCodeAt(i);
                if(test>0x0040 && test<0x005B){
                    test-=65;
                    test=key[test];
                    test+=64;
                    output+=String.fromCharCode(test);
                }
                else output+=String.fromCharCode(test);
            }
            document.getElementById("sinout").value=output;
        }
        else{
            input=input.toLowerCase();
            var keykey=new Array(26);
            var keyusr=document.getElementById("sinkey").value;
            if(keyusr.length!=26){
                output="鍵が無効です";
            }
            else{
                keyusr=keyusr.toLowerCase();
                for(i=0; i<26; i++){
                    keykey[i]=keyusr.charCodeAt(i)-97;
                }
                for(var i=0; i<input.length; i++){
                    var test=input.charCodeAt(i);
                    if(test>0x0060 && test<0x007B){
                        test-=97;
                        for(var j=0; j<26; j++){
                            if(test==keykey[j]){
                                test=j;
                                break;
                            }
                        }
                        test+=97;
                        output+=String.fromCharCode(test);
                    }
                    else output+=String.fromCharCode(test);
                }
            }
            document.getElementById("sinout").value=output;
        }
    }

    function Ms(){
        var keyde=[
            [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,],
            [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,],
            [2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,],
            [3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,],
            [4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,],
            [5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,],
            [6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,],
            [7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,],
            [8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,],
            [9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,],
            [10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,],
            [11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,],
            [12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,],
            [13,14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,],
            [14,15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,],
            [15,16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,],
            [16,17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,],
            [17,18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,],
            [18,19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,],
            [19,20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,],
            [20,21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,],
            [21,22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,],
            [22,23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,],
            [23,24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,],
            [24,25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,],
            [25,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,],
        ];
        var input=document.getElementById("msin").value;
        var output=new String();
        var key=document.getElementById("mskey").value;
        var keyuse=0;
        key=key.toUpperCase();
        if(document.getElementById("mse").checked){
            if(key.length==0)output="鍵を設定してください";
            else{
                input=input.toUpperCase();
                for(var i=0; i<input.length; i++){
                    var test=input.charCodeAt(i);
                    if(test>0x0040 && test<0x005B){
                        test-=65;
                        test=keyde[key.charCodeAt(keyuse)-65][test];
                        test+=65;
                        output+=String.fromCharCode(test);
                        keyuse++;
                        keyuse%=key.length;
                    }
                    else output+=String.fromCharCode(test);
                }
            }
            document.getElementById("msout").value=output;
        }
        else{
            input=input.toLowerCase();
            if(key.length==0)output="鍵を設定してください";
            else{
                for(var i=0; i<input.length; i++){
                    var test=input.charCodeAt(i);
                    if(test>0x0060 && test<0x007B){
                        test-=97;
                        for(var j=0; j<26; j++){
                            if(keyde[key.charCodeAt(keyuse)-65][j]==test){
                                test=j;
                                break;
                            }
                        }
                        test+=97;
                        output+=String.fromCharCode(test);
                        keyuse++;
                        keyuse%=key.length;
                    }
                    else output+=String.fromCharCode(test);
                }
            }
            document.getElementById("msout").value=output;
        }
    }

</script>
</head>
<body>
<center><h1>For Code edoC roF</h1></center>
<!--[if IE ]>
<div id="sitemix_user_contents">
<![endif]-->

<div class="tabbox">
    <p class="tabs">
        <a href="#tab1" class="tab1" onclick="ChangeTab('tab1'); return false;">シーザー</a>
        <a href="#tab2" class="tab2" onclick="ChangeTab('tab2'); return false;">単表式</a>
        <a href="#tab3" class="tab3" onclick="ChangeTab('tab3'); return false;">多表式</a>
    </p>
    <div id="tab1" class="tab">
        <p>
        <h1>入力</h1>
        <form action="">
            <center>
                <textarea id="caein" rows="10"></textarea>
            </center><br>
            <center>
                <b>文字数</b>
                <select id="zure">
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                    <option value=6>6</option>
                    <option value=7>7</option>
                    <option value=8>8</option>
                    <option value=9>9</option>
                    <option value=10>10</option>
                    <option value=11>11</option>
                    <option value=12>12</option>
                    <option value=13>13</option>
                    <option value=14>14</option>
                    <option value=15>15</option>
                    <option value=16>16</option>
                    <option value=17>17</option>
                    <option value=18>18</option>
                    <option value=19>19</option>
                    <option value=20>20</option>
                    <option value=21>21</option>
                    <option value=22>22</option>
                    <option value=23>23</option>
                    <option value=24>24</option>
                    <option value=25>25</option>
                    <option value=26>26</option>
                </select>
                <input type="radio" name="caesel" id="caee" checked="true">暗号化
                <input type="radio" name="caesel">復号化
            </center>
            <center>
                <button onclick="Cae(); return false;">送信</button>
            </center>
        </form>
        </p>
        <hr>
        <h1>出力</h1>
        <center>
            <textarea id="caeout" rows="10"></textarea>
        </center>
    </div>
    <div id="tab2" class="tab">
        <p>
        <h1>入力</h1>
        <form action="">
            <center>
                <textarea id="sinin" rows="10"></textarea>
            </center><br>
            <center>
                <b>鍵</b>
                <input type="text" id="sinkey" size="40" maxlength="26">
                <input type="radio" name="sinsel" id="sine" checked="true">暗号化
                <input type="radio" name="sinsel">復号化
            </center>
            <center>
                <button onclick="Sin(); return false;">送信</button>
            </center>
        </form>
        </p>
        <hr>
        <h1>出力</h1>
        <center>
            <textarea id="sinout" rows="10"></textarea>
        </center>
    </div>
    <div id="tab3" class="tab">
        <p>
        <h1>入力</h1>
        <form action="">
            <center>
                <textarea id="msin" rows="10"></textarea>
            </center><br>
            <center>
                <b>鍵</b>
                <textarea id="mskey" rows="1"></textarea>
                <input type="radio" name="mssel" id="mse" checked="true">暗号化
                <input type="radio" name="mssel">復号化
            </center>
            <center>
                <button onclick="Ms(); return false;">送信</button>
            </center>
        </form>
        </p>
        <hr>
        <h1>出力</h1>
        <center>
            <textarea id="msout" rows="10"></textarea>
        </center>
    </div>
</div>

<script type="text/javascript">
    // デフォルトのタブを選択
    ChangeTab('tab1');
</script>
<center><h3>Presented by mの本音</h3></center>
</body>
</html>